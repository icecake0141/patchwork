{% extends "base.html" %}
{% block content %}
<h1>Trial Result</h1>
<p>Sessions: {{ result.metrics.session_count }} / Modules: {{ result.metrics.module_count }}</p>
<h2>Rack Topology</h2>
<table border="1">
<tr><th>rack_a</th><th>rack_b</th><th>media</th><th>count</th></tr>
{% for row in topology_rows %}
<tr>
  <td>{{ row.rack_a }}</td>
  <td>{{ row.rack_b }}</td>
  <td>{{ row.media }}</td>
  <td>{{ row.count }}</td>
</tr>
{% endfor %}
</table>
<h2>Rack Occupancy</h2>
{% for rack,svg in rack_svgs.items() %}
<h3>{{ rack }}</h3>
<div>{{ svg|safe }}</div>
{% endfor %}
<h2>Session Preview</h2>
<table border="1">
<tr><th>session_id</th><th>media</th><th>src</th><th>dst</th></tr>
{% for s in result.sessions[:50] %}
<tr><td>{{ s.session_id }}</td><td>{{ s.media }}</td><td>{{ s.label_a }}</td><td>{{ s.label_b }}</td></tr>
{% endfor %}
</table>
<h2>Save</h2>
<form method="post" action="/save">
  <input type="text" name="project_name" placeholder="project name" required>
  <input type="text" name="note" placeholder="revision note">
  <button type="submit">Save</button>
</form>
{% endblock %}
